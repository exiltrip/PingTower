# Система Алертов PingTower

Реализована полнофункциональная система уведомлений для мониторинга сервисов.

## Функционал

### 1. Каналы уведомлений (`/alerts`)
- **Webhook каналы**: Поддержка Slack, Discord и других сервисов через webhooks
- **Telegram Bot**: Интеграция с Telegram для мгновенных уведомлений
- **Управление**: Создание, удаление и настройка каналов

### 2. Правила алертов
- **Привязка к чекам**: Настройка уведомлений для конкретных мониторов
- **Гибкие условия**: 
  - Количество неудачных попыток до срабатывания
  - Уведомления о восстановлении сервиса
- **Мульти-канальность**: Один чек может отправлять уведомления в несколько каналов

### 3. Ежедневные отчеты
- **Расписание**: Настройка времени отправки отчетов
- **Контент**: Гибкая настройка содержимого:
  - Общая статистика сервисов
  - Информация о сбоях
  - Данные о восстановлениях
- **Мульти-канальность**: Отправка в несколько каналов одновременно

## API Endpoints

### Каналы уведомлений
- `GET /api/v1/notifications/channels` - Получить все каналы
- `POST /api/v1/notifications/channels` - Создать канал
- `DELETE /api/v1/notifications/channels/{id}` - Удалить канал
- `POST /api/v1/notifications/channels/telegram/initiate` - Создать код привязки Telegram

### Правила алертов
- `GET /api/v1/checks/{id}/alert-rules` - Получить правила для чека
- `POST /api/v1/checks/{id}/alert-rules` - Создать правило
- `DELETE /api/v1/alert-rules/{id}` - Удалить правило

## Компоненты

### Frontend структура
```
src/
├── pages/alerts/ui/AlertsPage.tsx                    # Главная страница алертов
├── features/alerts/ui/
│   ├── NotificationChannels.tsx                     # Управление каналами
│   ├── AlertRulesManagement.tsx                     # Управление правилами
│   └── DailyAlerts.tsx                              # Ежедневные отчеты
└── features/notifications/api/notifications.ts      # API слой
```

### Типы данных
- `NotificationChannel` - Канал уведомлений
- `AlertRule` - Правило алерта
- `DailyAlert` - Настройки ежедневных отчетов

## Использование

1. **Настройка каналов**: 
   - Перейдите на `/alerts` 
   - Вкладка "Каналы уведомлений"
   - Добавьте Webhook или Telegram канал

2. **Создание правил**:
   - Вкладка "Правила алертов"
   - Выберите чек и канал
   - Настройте условия срабатывания

3. **Ежедневные отчеты**:
   - Вкладка "Ежедневные отчеты"
   - Установите время и содержимое
   - Выберите каналы для отправки

## Особенности реализации

- **Lazy Loading**: Компоненты загружаются по требованию для оптимизации
- **TypeScript**: Полная типизация для надежности
- **Error Handling**: Обработка ошибок API и валидация форм
- **Responsive Design**: Адаптивный интерфейс с Ant Design
- **Real-time**: Мгновенное обновление данных после изменений

## Планы развития

- [ ] **Admin функционал**: Выбор пользователей для рассылки алертов
- [ ] **SMTP каналы**: Email уведомления  
- [ ] **Шаблоны сообщений**: Кастомизация текста уведомлений
- [ ] **Аналитика**: Статистика отправленных уведомлений
- [ ] **Интеграции**: Discord, Microsoft Teams, Slack Apps

## Зависимости

- React 18+ с TypeScript
- Ant Design для UI компонентов  
- Axios для HTTP запросов
- React Router для навигации

## Инструкция по установке

1. Убедитесь, что проект PingTower запущен
2. Перейдите на `/alerts` в интерфейсе
3. Настройте каналы уведомлений
4. Создайте правила алертов для ваших чеков
5. (Опционально) Настройте ежедневные отчеты
